<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[天体测量法]]></title>
    <url>%2F2017%2F12%2F26%2F%E5%A4%A9%E4%BD%93%E6%B5%8B%E9%87%8F%E6%B3%95-1%2F</url>
    <content type="text"><![CDATA[天体测量法交叉匹配法找到一个图像中源像素坐标与另外一个天球坐标参考目录（或另一个观测图像的源像素坐标）的最佳几何匹配关系。标记参考列表为 $R$ ,图像列表为 $I$ ，两者之间的转换关系为 $F_{R \rightarrow I}$ 。为了找到匹配的点源对，需要知道转换函数，反之亦然，为了推导出转换函数，需要知道匹配点。 &emsp;&emsp; 在天文应用中一个更普遍的假设是$F{R\rightarrow I}$是一个相似变换，比如旋转、放大等，$F{R\rightarrow I} = \lambda A r + b$，矩阵 A 是正交矩阵的 $\lambda$倍，b 是平移转换，r 是点的空间矢量矩阵，在大视场中，会存在高阶失真项，有时候图像会包含大量的源，图像匹配更难。为此，本文提供一种更普遍的算法来实现大视场高阶项失真改正的天体测量方法，该算法在大视场图像中表现的更快更加稳健，而且需要的假设更少。&gt; 与线性项相比，失真是不可忽视的但较小 在参考点和图像点之间存在平滑的转换 点列表有相当多的共同来源 转换是局部可逆的 对称点匹配首先假设 $F{R \rightarrow I}$ 已知，找到 $R$ 和 $I$ 之间的匹配点，应该首先将参考点转换到图像的参考框架中 $R’ = F{R \rightarrow I}(R)$, 然后就可以执行 $ R’$ 和 $I$ 的点匹配；$R’$中的一点在 $I$ 存在一个很接近的一点，就认为是一对匹配点。&gt; 假设一维参考列表中有按升序排列的 N 个点(开始时使用快速排序法执行一次即可)，时间尺度为 $O(N log N)$ 关于二维点的列表，我们再次假设这些点是由它们的 x 坐标[初始排序 $O(N log N)$]以升序给出的，并且它们被均匀地分布在单位面积内。在 x 方向排序时间与一维一致，但两点间的欧几里得距离不一定最小，除了两点间距离的期望值是 $1/ \sqrt N$ 外，还需要在具有相同宽度和高度的条带内比较点，其时间尺度为 $O(\sqrt N)$,所以匹配两个二维目录的对称点需要的时间尺度为 $O(N^{3/2} log N)$。 找到转换函数任务是找到 $R$ 和 $I$ 之间的转换关系，该算法的第一步也是最重要的一步是找到基于三角匹配顶点的初始变换函数 $F{R \rightarrow I}^{(1)}$，使用该转换函数，完成对称点的匹配，进一步改善转换函数 $F{R \rightarrow I}^{(i)}$，即使用迭代的方法来改进，从而增加对称匹配点数。 三角匹配三角匹配法用于初始转换函数，函数 $F_{R \rightarrow I}$ 主导项是线性部分，所以在 $R$ 和 $I$ 之间的一阶近似存在一个放大尺度(除了旋转、比例尺和平移外) 三角空间 定义归一化三角空间 $T^{min}$，其坐标对原始列表坐标的变换不明显，即所有的相似三角形可以由相同点表示，与比例尺无关。$$T^{mix}{x} = p/a \tag {1}$$ ， $$T^{mix}{y} = q/a \tag {2}$$ a、p、q 是按降序排列的三角形边长。混合空间三角形的坐标是边长的连续函数，但确实方向信息。但对于大量的点和三角形来说，确定指向很可靠。 chrial 空间三角形，$$T^{chir}{x} = b/a \tag {3}$$ $$T^{chir}{y} = c/a \tag {4}$$， a、b、c 为逆时针方向的三个边，a 为最长边。在这个空间中，具有不同指向的相似三角形是有不同的三角形，缺点是不连续。但可以定义既可以连续，又能保证比例尺的参数，首先沿着 $T{x} + T{y} = 1$将三角形翻转，就可以将等边三角形移动到原点，接下来应用整个空间的径向放大率将 $T{x} + T{y} = 1$线沿着 $T{x}^2 + T{y}^2 = 1$弧移动。 continuous 空间三角形最佳三角形的大小由两个因素决定：大三角形的畸变和三角形参数的不确定性，小三角形的大小与顶点的天体测量误差相当 最佳三角形集N 个点可以形成 $N^3 /6$ 个三角形，在大视场中包含万以上的点，形成完整的三角形列表显然不现实。 首先存储和处理这么多的三角形是电脑无法完成的。 第二，完整列表中有很多不适合使用的三角形。比如在 $I$ 中的大三角形在 $R$ 中会有显著的扭曲现象，因此在三角空间中应该用不同的坐标系表示才合理。最佳三角形的大小由两个因素决定：大三角形的畸变和三角形参数的不确定性，小三角形的大小与顶点的天体测量误差相当。估计扭曲因子 $f_d$ 的值，$f_d \simeq |(sin d - tan d)/d| \simeq |1 - cos d | $, 该值为正交投影和日晷投影的差值，$d$ 为视场中心开始测量的径向距离。在 HATNet 中($d = D \simeq 6^{\circ}$ to the corners)，畸变效应在三角空间产生的误差为 $fd L/D$ , $L,D$分别为所选三角形的大小和图像的特征大小。最佳三角形的大小估计值为 $L{opt} = \sqrt {\frac{\delta D}{f_d}},\delta 为天体测量的不准确值$，在 HATNet 中 $D = 2048 , fd = 0.005 , \delta = 0.01 , 得到最佳三角形大小为 L{opt} \simeq 60 - 70 pixels $. 第三，处理许多三角形可能会由于大量点导致产生过于饱和的三角形空间，并可能产生意想不到的三角形匹配 扩展德劳内三角形 Delaunay triangulation 是一种在点集内快速而稳健的产生三角网的方法，Delaunay triangulation 是不相交的三角形，其中任何三角形的外接圆都不包含任何其他三角形的点。由欧拉定律可以得到 N 个点形成的德劳内三角形数为 $T_D = 2N -2 -C$ ，其中C是点集的凸包上的边的数量。大量的点数时，近似为 $T D = 2N$ ，选择的距离在 $T{opt}$ 范围内的点集，则可以形成的德劳内三角形为 $2 D^2 / L^2_{opt}$ ，虽然可以实现快速匹配，但不具有稳定性，具体的原因如下 &gt; 其对星表中的一个点的移除非常敏感.根据多面体公式，一个点会有六个邻近点，属于六个三角形，一般会在图像中的最亮星去建立 $I$，但会由于过饱和或落在坏的列中而消失. 其次，更重要的是，不能保证 $R$ 和 $I$ 中点的空间密度是相似的. 德劳内三角形的数量少于所需的三角形数量 因此需要扩展德劳内三角形的数量，定义一个水平线 $\ell$ ， 对于任意给定的点 P ，从 N 个点集选择所有可以经过德劳内三角形 $\ell$ 边连通点 P 的点，一个数据点可以扩展的三角形数量为 $$ T_{\ell} = (3\ell^2 + 3\ell + 1)(3\ell ^2 + 3\ell)(3\ell^2 + 3\ell -1 )/6 \tag{5}$$ 三角形空间实现三角形匹配 如果已知参考目录和输入列表的三角形集合，则可以使用第2节中描述的对称点匹配在标准化的三角形空间（它们由二维点表示）中匹配三角形，接下来我们创造一个 $N_R \times N_I$ 的 vote 矩阵 $V$, $N_R$ 和 $N_I$ 分别为参考目录和输入列表的点数，用于产生三角形。每一个匹配的三角形分别对应参考目录的三个点和输入列表的三个点，即 $r_1,r_2,r_3 and i_1,i_2,i3$ , 增加的三个矩阵元素为 $V{r_1i1},V{r_2i2} , V{r_3i_3}$ ，增加的矩阵元素数量依赖于三角形空间中匹配三角形的距离，距离越近，就有越多的 vote 。建立了 vote 矩阵之后，我们选择矩阵的最大元素，并且引用这些行和列索引的适当的点认定为是匹配的点源，选择最大的40%的矩阵元素即可 转换函数的统一性如果从三角形匹配中知道可能点对的一个初始集合后，就可以使用多项式拟合来将参考点集转换为输入点，在变换之前，我们的假设是变换中的主导项是相似变换，这意味着它的齐次线性部分几乎应该是一个单位性算子，即 $A^+ A = I$ ，相似变换可以写为 $$r^{‘} = \lambda A r + b \equiv \lambda \begin{pmatrix} a &amp; c \ b &amp; d \end{pmatrix} r + b \tag{6}$$ $\lambda \neq 0,a,b,c,d$ 分别为给定旋转角的正弦和余弦值，即 ($a = d , b = -c$) 。分离转换函数的线性部分，其是旋转和放大的组合矩阵，定义一个 2x2 的酉矩阵 $$ \Lambda^2 \equiv \frac{(a \mp d)^2 + (b + c)^2}{a^2 + b^2 + c^2 + d^2} \tag{7}$$ 加减号代表正反转变换，$\Lambda = 0$ 表示扭曲变换，$\Lambda$ 可以很好的估计初始的转换函数是否足够好，如果转换函数有误差，可以通过迭代直到 $\Lambda$ 达到满意。 点匹配参考目录 $R$ 和图像 $I$ 中的点匹配处理过程如下 在 $R$ 和 $I$ 上分别产生两个三角形集 $T_R$ 和 $T_I$ ， 在第一次迭代时，只生成Delaunay triangles 随后，如果需要的话，可以根据水平线 $\ell$ 生成扩展 Delaunay triangles ， 增加三角形数 使用对称点匹配法在三角形空间中匹配这两个三角形集 选择一些可能的点对，使用vote 矩阵算法（产生 $N_0$ 对点对） 使用最小二乘法得到初始的平滑转换函数 $F_{R \rightarrow I}^ {(1)}$ 检查 $F_{R \rightarrow I}^ {(1)}$ 的统一性( unitarity) 如果其大于给定的阈值 $O(f_d)$ ，增大给定的 $\ell$ 值，返回到第一步，如果小于，跳转到第五步 使用初始的转化函数将 $R$ 转换到图像的参考框架下，即将参考目录转换为图像列表 $R’ = F_{R \rightarrow I}^{(1)}(R)$ 在 $R’$ 和 $R$ 之间执行对称点匹配，产生 $N_1 \gt N_0$ 个点对 基于更多的点对数重新定义转换函数，产生转换函数 $F_{R \rightarrow I}^ {(i)}$ ，$i$ 为迭代的次数 如有必要，重复第5,6和7步，增加匹配点的数量，并精确转换函数 对于大多数天体测量的变换和失真问题，认为在局部可以用相似变换近似解决，关键的一步是最初的三角形匹配，并且由于使用了局部三角形，这证明是一个稳健可靠的的过程，转换函数的平滑处理一般使用多项式拟合法，拟合的阶数取决于失真的程度 软件的实现和应用软件的实现坐标匹配和转换算法，程序grmatch实现匹配点集，包括三角空间生成，三角匹配，对称点匹配和多项式拟合，即第三部分的步骤1-4，grtrans使用grmatch输出的变换系数变换坐标列表，也可以实现手动点匹配或外部软件产生的点对的多项式拟合。通过结合这两个程序，可以很容易的得到 FITS 文件的 WCS 信息，也可以对拍摄到的图像进行天体测量和恒星识别，其具体步骤如下： 对所有的观测，使用 2MASS 参考目录，参考列表包括源标识码、原始天球坐标、光度和映射坐标 输入列表为每个图像产生的星表 使用 grmatch 来匹配输入的星列表和参考星列表，是在映射坐标 ($\xi,\eta$) 和 探测到的图像坐标 (X,Y) 之间匹配，输出文件为匹配列表和多项式拟合的参数列表和一些统计数据。 参考星列表 ($\xi,\eta$) 使用 gtrans 转换为图像的坐标 (X,Y) 我们注意到这个过程的关键部分是第三步。这可以通过使用许多参数进行微调，其中最重要的是多项式阶数,下图展示了两个向量图，其显示了对于典型的HATNet图像使用二阶和四阶多项式变换的变换的参考坐标和检测到的星形坐标之间的差异 在第一种情况下，通过使用二阶融合，保留了有限的径向结构，并且位于图像角落的恒星由于光学中的大变形而不是均匀匹配的，而使用四阶拟合，图像的所有片段都是匹配的，残差也较小 使用四阶（左）和六阶（右）多项式拟合的变换参考的Y坐标与典型HAT场的输入星坐标之间的差异 虽然程序速度很快，但我们注意到这个过程中最耗时的部分是三角测量生成和三角形匹配本身，重点是将参考目录目标转换为输入列表信息，才可以利用对称点生成的三角形完成匹配 结论我们提出了一个对二维点列表的两个交叉匹配稳健算法。这个任务是双重的：赵大鹏两个列表之间平滑的空间转换，并交叉匹配点，这两个步骤交织在一起并且以迭代的方式执行，直到达到令人满意的变换和匹配率。 基于三角形匹配找到点列表之间的初始转换 考虑到场的畸变和天体测量误差，我们计算出三角形的最佳尺寸和数量 确定了两个列表之间的转换之后，可以检查关于主导项的线性的最初假设是否足够好]]></content>
      <categories>
        <category>天文学</category>
      </categories>
      <tags>
        <tag>CCD 图像</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Python install]]></title>
    <url>%2F2017%2F12%2F22%2Fpython%20install%2F</url>
    <content type="text"><![CDATA[使用Python安装 python 在你的 PC 上(Win、Linux and Mac)，访问 Python 主页下载安装即可Python安装各种 Python Package 在你的 Python 中，如果你的Python版本是 2.× ，使用12sudo apt-get install python-pipsudo pip install &lt;package&gt; #package is the python package,for example numpy 如果你使用的是 Python 版本是 3.x ,使用12sudo apt-get install python3-pipsudo pip3 install &lt;package&gt; 建议使用清华大学或着中科大的源安装 Python Package ，否则会因为墙的问题导致下载失败。对应的源地址为12https://pypi.tuna.tsinghua.edu.cn/simple/ 清华大学http://pypi.mirrors.ustc.edu.cn/ 中国科学技术大学 具体的使用方法是123sudo pip3 -i https://pypi.tuna.tsinghua.edu.cn/simple/ install &lt;package&gt;orsudo pip3 -i http://pypi.mirrors.ustc.edu.cn/ install &lt;package&gt; 科学计算和数据分析必备的 Python Package 主要有 Numpy 高性能多维数组矢量计算 Scipy 数值计算 matplotlib 绘图及交互式可视化 Pandas 处理表格文件 机器学习必备的 scikit-learn ，神经网络和抓包等网上都有，自行下载即可 在 Python 中使用 C 语言代码 Cython 前提准备工作已经完成]]></content>
      <categories>
        <category>科学计算</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[我的工作台]]></title>
    <url>%2F2017%2F12%2F22%2F%E6%88%91%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8F%B0-1%2F</url>
    <content type="text"><![CDATA[我的工作台作为一个忠实的电子产品爱好者，都喜欢把钱花费在这些方面。之前就很想将其写下来，算是记录自己的生活。 显示器：Dell U2417 Dell U2212M 支持旋转升降，尤其2417的极窄边框键盘： 酷冷XT104键 传说中的半价小 F鼠标： 罗技 MX Master( 支持三台电脑切换，尤其像我用 Mac Linux and Win)音箱：JBL 的蓝牙音箱，待机时间还不错，颜值高电脑： Macbook Pro 、Acer 笔记本，当做机箱使用了台灯：小米台灯，冲着颜值和智能去的耳机：Sony MDR-1BAT三只裸熊和宜家的盆栽鼠标垫： 金属鼠标垫宜家文件盒与桌垫 平时没事看看文献，写写 Python 代码，其实更爱使用 Linux 系统。暂时更新到这。]]></content>
      <categories>
        <category>生活</category>
      </categories>
      <tags>
        <tag>设备</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CCD知识点]]></title>
    <url>%2F2017%2F07%2F10%2FCCD%E7%9F%A5%E8%AF%86%E7%82%B9%2F</url>
    <content type="text"><![CDATA[CCD知识点像素 pixel and 分辨率 resolutionAn actual CCD will consist of a large number of pixels (i.e, potential wells), arranged horizontally in rows and vertically in columns。For example,1024 x 1024,each pixel is 10$um$, charge将光子转换为电子信号，The CCD is an analogue device, and the analogue voltage values are converted into a digital form by the camera electronics. degree arcseconds arcminarcseconds = (206.265 / (focal length in mm) ) x (pixel size in microns)**arcmin is a unit of angular measurement equal to 1/60 of one degree,also equal to $\frac{\pi}{10800}$ radian. arcseconds is equal to $\frac{1}{60}$ of arcmin, so one degreen is 3600 arcseconds. Some aspects of CCD behaviourQuantum Efficiency并不是每一个电子都会被探测器探测到并转换为脉冲信号，The percentage of photons that are actually detected is known as the Quantum Efficiency (QE). Wavelength rangeCCDs can have a wide wavelength range ranging from about 400nm (blue) to about 1050nm (Infra-red) with a peak sensitivity at around 700nm Dynamic Range在同一幅图上可以准确分别的最亮源和最暗源的能力。the dynamic range of a CCD is usually discussed in terms of the minimum and maximum number of electrons that can be imaged。当更多的光线落入到 CCD 上时，越来越多的光子被填充进势阱，最终到势阱无法容纳电子，像素饱和。读出噪声：每个像素中的最小光子数（信号） Linearitythe eye is not a linear detector (except over very small variations in intensity) and has a logarithmic response.探测到的光子与转换为的电子是线性关系的。 NoiseOne of the most important aspects of CCD performance is its noise response. Dark current—thermally generated nois:At room temperature, the noise performance of a CCD can be as much as thousands of electrons per pixel per second.在冷却效果下，暗电流会急速的降低，实际观测中会对 CCD 进行降温。降为多少度才是合理的？ readnoise—the ultimate noise limit of the CCD:he readout noise originates from the conversion of the electrons in each pixel to a voltage on the CCD output node (a typical value would be around 4µV per electron).Noise values of 2-3 electrons rms (root mean square) are now typical for many CCDs SNR(Signal divide Noise) 越大，目标被探测的概率越大 full-well capacity (FWC)full-well capacity (FWC) determines the maximum signal that can be sensed in the pixel, and is a primary factor affecting the CCD’s dynamic range.The above image has an average background sky pixel value of 950. Most software packages add a pedestal value of 100 to the pixel values in order to prevent negative numbers. This means the true value is 850. This is called the Background ADU Count. To convert to a value in electrons, this number must be multiplied by the camera gain. In this example, an ST-10XME camera was used, which has a gain of 1.3e-/ADU. Therefore the actual sky background value is 1105e-. The exposure was 600 seconds, implying a sky background flux at this observing location of 1.8e-/sec, indicating a dark site. Again this is a function of the focal ratio, in this case f/7. System Gain (G)一个 CCD 数模转换单元(ADU)对应的原始光生电子数，单位为$e^{-} / ADU$，比如$1.8 e^{-} / ADU$表示每1.8个电子产生相机的一个技术单位。单位时间内入射的光子数可以用泊松分布来表示， CCD Formatanalog-to-digital converter (ADC) and analog-to-digital unit (ADU)After the output amplifier fulfills its function of magnifying a charge packet and converting it to a proportional voltage, the signal is transmitted to an analog-to-digital converter (ADC).an ADC capable of 12-bit resolution assigns each pixel a value ranging from 0 to 4095, representing 4096 possible image gray levels (2 to the 12th power is equal to 4096 digitizer steps). Each gray-level step is termed an analog-to-digital unit (ADU). image quality Spatial Resolution: Determines the ability to capture fine specimen details without pixels being visible in the image. Light-Intensity Resolution: Defines the dynamic range or number of gray levels that are distinguishable in the displayed image. Time Resolution: The sampling (frame) rate determines the ability to follow live specimen movement or rapid kinetic processes. Signal-to-Noise Ratio: Determines the visibility and clarity of specimen signals relative to the image background. 图像矫正暗电流矫正(Dark current)CCD 通电产生的温度带来的噪声，实际中一般降低温度冷却即可。在无光的环境下以相同的温度与曝光时间再次拍摄CCD影像，所得到的就是纯粹由CCD温度所产生的杂讯，所以这样的校正影像也称为暗电流影像（dark current frame )。 偏压矫正(bias )一般天文CCD晶片上有数百万个像素，每个像素的特性皆不同，有些在未拍摄的状态下也会有少许的电子信号产生，有些则是曝光结束后，在从CCD晶片读出影像的过程中，每个像素的影像信号依序传输时所产生的杂讯，这些杂讯同样会加入拍摄的天体影像中，需要加以排除。这种校正影像称为BIAS（偏压杂讯）。因为BIAS是像素本身以及信号传递过程所产生的不必要讯号，与拍摄时间无关，所以其实偏压杂讯影像就是拍摄0秒钟的暗电流影像。本底图像一般是采用零秒暗场图像 平场矫正(flat field)光线从望远镜前方进入一直到被CCD的像素感应之前，至少会经过望远镜的镜片或玻璃、滤镜、CCD前方的保护玻璃等等，每个光线经过的地方如果有灰尘或污渍，或是透光率不同，就会造成到达像素的光线不均匀。 此外，望远镜虽然可以将光线集中聚焦，但是光线出口处的中央最亮，越旁边光线越弱，称为周边减光效应。如果不做校正，将会出现星星在CCD的位置不同，其亮度就不同的错误。解决方式就是将整个光学系统对向均匀的光线来源拍摄影像，即可知道光量不均的状况。这样的校正影像称为平场影像（Flat Field image） Overscan 区域在一些 CCD 中有一些不感光的行与列，或者在 CCD 每行读出前后，空读出若干行和列。 利用 CCD 进行天文观测的策略基本原理改正图像 = $\frac{观测图像-本底图像-暗场}{平场图像-本底图像-暗场}$. 观测前准备 熟悉所用望远镜观测系统和控制界面 确认当晚要用的滤光片 准备原表和标准星表，证认图，观测顺序，曝光时间 准备候选源表，如果天气条件不好时观测 观测策略 成像观测 选择所用滤光片 5-10幅本底图像 5-10幅平场图像 获取标准星图像 目标源图像 观测顺序：天文昏影终之前：本底图像—-平场图像—标准星–目标源—标准星—目标源…….天文晨光始：平场图像—本底图像 光谱观测 根据所需分辨率和观测当晚的 seeing 选择缝宽，获取本底图像、所用色散元件的光谱色散平场图像，所 用色散元件的波长定标谱，所用色散元件的标准星谱 本底图像(BIAS) 每天在开始观测前和结束观测前各获取5-10幅0秒暗场，要求快门关闭、圆顶关闭和关灯、望远镜镜盖关闭 平场(Flat-Field) 每天观测开始前和结束后各获取5-10幅，三类平场 圆顶灯光平场(Dome-Flat):优点是不依赖天气、不占观测时间、高光子计数；缺点是照明很难均匀、光谱源与夜天光差别很大 晨昏天光平场(Twilight-Flat)：优点是在一定视场内比较均匀、不占观测时间、高计数；缺点是大视场不均匀、每天观测时间短、可能亮源污染、光谱不同于夜天光 夜天光平场(Super-sky-Flat)–通过图像合并技术实现：优点是均匀、与观测条件完全相同；缺点是占观测时间、依赖天气、低计数 目标源观测策略：最好在目标源中天时观测（大气消光最小），先用 CCD 快模式获取快照，检查视场然后用 CCD 慢模式观测；长曝光最好采用2-3次曝光方式，甚至采用 dithering 方式观测。 数据处理基本原理$改正图像 = \frac{源图像-本底图像}{平场图像-本底图像}$ 成像 基本 CCD 处理 测光 流量标定 光谱 基本 CCD 处理 波长标定 弯曲改正 抽谱 流量定标 误差 随机误差—符合高斯分布可以通过数据统计得到误差源： CCD 读出噪声 扣除 overscan 带来误差 减本底图像带来误差 平场改正带来误差 暗流改正带来误差 天光背景噪声 去除背景误差随机误差可以通过下面公式累加:$\sigma^2 = \sigma_1^2 + \sigma_2^2 + …$ 系统误差难以测量 CCD 增益和读出噪声计算CCD 相机的2个基本量：读出噪声–单位电子/像素、增益–电子/ADU计数。简易计算： 基本假设：CCD 在小范围内不同像素的性质一样 获取2幅同样条件下的平场图像（F1,F2） 获取2幅本底图像(B1,B2) 图像运算：B12 = B1-B2;F12 = F1-F2 图像合并 增加信噪比 去除宇宙线 去除坏像元 提高空间分辨率 加大读出噪声 图像合并原理：对于每个图像对应点有值$a_1$,$a_2$,…,$a_n$，算法：1. 简单求和$S = a_1 + a_2 + … + a_n$。2. 平均值：S/n。3. 中值：$a_m$。4. mode法：$3\times mean - 2\times median$。5. $3\sigma clip$法：去除偏离平均值$3\sigma$以外的点。6. Minmax：剔除若干大值和小值后平均.7. 最可几值 每一副图像扣除背景图像 由于每一副图星象位置不一样，需要把每幅图同一颗星的位置测出，用来计算位置偏差。 图像处理流程详细知识天光背景知识与提取 SEXtractor巡天图像中的每一个像素的光子是背景信号和目标源信号的累积，需要构造天光背景分布情况，使用的是$K-\sigma clipping$算法，将图像分解为若干个局部区域，在一个局部区域计算所以像素的平均值(mean)、中值(median)、标准差（$\sigma$）。去除落在 median $\pm 3\sigma$外的像素值，迭代直到所有像素都在median $\pm 3\sigma$内，如果每次迭代后的$\sigma$相对上次的变换小于20%，此区域内背景值直接用最后的平均值代替，如果大于20%，此区域内的背景值用众数mode 代替:$mode = 3median - 2 mean$,另外，也可以用$mode = 2.5 median - 1.5mean$，在密集情况下效果更佳，但带来更大的噪声。对得到的背景值随区域位置的分布进行中值滤波平滑得到全图像区域的天光背景图像，BACK_FILTERSIZE，每个小区域面积（像素数量）等于输入的参数BACK_SIZEHI值 目标源的检测 峰值检测：适用于恒星检测，不适用于地面度亮源的检测 阈值检测：有参数DETECT_MINAREA、 DETECT_THRESH 和ANALYSIS_THRESH 调节，参数DETECT_THRESH用于检测目标源的阈值，ANALYSIS_THRESH分析目标源和 FWHM 时用到的阈值， 天体轮廓被提取需要满足的三个条件： 所以扣除背景后的像素值要高于设定的检测阈值 所有这些像素必须在一个连通区域内 这些像素的数量必须不少于设定的DETECT_MINAREA 的值 通过对图像进行滤波减弱噪声对目标源检测的影响，用于暗弱天体检测的高斯掩码和地面度亮源的Top-Hat 掩码 多阈值算法：构建一组多等光度线来分析判断一个像素块是否包含了多个目标源的叠加，并且对有叠加的情况分解其中不同目标源的像素区域，由输入参数DEBLEND_NTHRESH 和DEBLEND_MINCONT调节，具体流程是： 对每一个像素块在检测阈值和扣除背景后的峰值之间分成N 个水平，这 N 个水平构成一线性或指数数列，sextractor 在像素块内再作 N次阈值检测，其中第 i 次以$t_i$为阈值，每次检测得到一组或多组连通的像素小区， ## CCD 系统 1. 像素数是行和列的像素数目，即行乘以列；像素大小就是一个像素的尺寸。像素数乘以像素大小是 CCD 的尺寸。 2. 线性： $S_{out} = g S_{in} + S_0$,即输出数据为增益乘以输出光量加零点，其中零点是本底加暗流 3. 动态范围：器件像素饱和时电荷与3倍系统噪声均方根之比 4. 失效像素：像素光敏性很差或者根本没有光敏性、另外一些像素暗流特别大，无法正常工作，这些像素称为失效像素。 5. 起晕：当 CCD 的某些像素受到极强光照射时，位阱收集的电荷已远远超过饱和值，使一部分电荷溢出到邻近像素，造成类似于照相底片上亮星周围的光晕。**为了提取暗天体，曝光时间总量尽量加长，是记录的暗星有较高的信噪比，同一区域内越来越多的亮星起晕，拖尾现象的处理需要了解下** 6. 信噪比和极限星等的估计： **决定观测质量的好坏和最暗可观测天体星等的因素，归根到底，是图像的信噪比**，一个点源天体在焦面上占据nxn像素，设曝光时间为 t，单位时间内，nxn 像素接受到的总光子是 S，天光背景在每一个像素上累积的光子是 Bt，暗流电荷是 dt，CCD 系统的系统噪声为$N_r$,量子效应为 Q，则信号为 QSt，总噪声为 $N_{total} = \sqrt{QSt + n^2QBt+ n^2 dt + n^2 N_r^2}$。则信噪比为 $\sigma = \frac{QSt}{\sqrt{QSt + n^2QBt+ n^2 dt + n^2 N_r^2}}$。 7. ADU： 经过模数变换器转换后的数字，**增益为一个电子对应的 ADU 数，计算增益值得方法是： $N_{out}^2 = g S_{out} + g^2 N_{r,in}^2$,改变入射光强度，得到一组$N_{out}^2,S_{out}$,他们具有线性关系，斜率为增益 g，截距为$g^2 N_{r,in}^2$,求出系统噪声$N_{r,in}$**。 ## CCD 图像处理 1. 预处理： 设有一帧 CCD 原始图像R(x,y) , x,y表示像素坐标。用同样曝光时间，但在全黑环境下拍摄的图像称为暗场d(x,y),将两图相减，即$S_1(x,y) = R(x,y)-d(x,y)$，$S_1(x,y)$即为去除个像素暗流的图像，消除像素灵敏度不同的影响，采用平场校正的办法，平场是在同样条件下，对均匀亮度的面光源取得一帧图像。**将拍摄的平场$F(x,y)$对$S_1(x,y)$按对应像素一一相除，就校正了灵敏度的差别，必须先对平场做暗场的处理，需要采用和平场曝光时间相同的暗场才有效** 2. 为了改善暗场与平场的信噪比，最好在短时期内用同样曝光时间摄取许多帧暗场和平场，分别加以平均，以提高图像的信噪比。 3. 星等的测定 * 星等的计算：CCD 图像上的星象，可提取的天文信息是恒星亮度和恒星的位置，测量恒星的星等就是测量该星覆盖范围内的总光量，减去相同面积内的天光总量。设总光量为$S_{s,sum(x,y)}$,则两星的星等差为$\frac{S_{s,sum }}{S_{s,sum2}} = 2.512^{m_2-m_1}$.]]></content>
      <categories>
        <category>天文基础知识</category>
      </categories>
      <tags>
        <tag>CCD</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Markdown syntax]]></title>
    <url>%2F2017%2F05%2F23%2FMarkdown%20syntax%20guide%20and%20writing%20on%20MWeb%2F</url>
    <content type="text"><![CDATA[Markdown syntax guide and writing on MWebPhilosophy Markdown is intended to be as easy-to-read and easy-to-write as is feasible.Readability, however, is emphasized above all else. A Markdown-formatted document should be publishable as-is, as plain text, without looking like it’s been marked up with tags or formatting instructions.Markdown’s syntax is intended for one purpose: to be used as a format for writing for the web. NoticeYou can use CMD + 4 or CMD + R to preview the result. HeadersExample: 123# This is an `&lt;h1&gt;` tag## This is an `&lt;h2&gt;` tag###### This is an `&lt;h6&gt;` tag Result: This is an &lt;h1&gt; tagThis is an &lt;h2&gt; tagThis is an &lt;h6&gt; tagEmphasisExample: 1234567*This text will be italic*_This will also be italic_**This text will be bold**__This will also be bold__*You **can** combine them* Shortcuts: CMD + U、CMD + I、CMD + BResult: This text will be italicThis will also be italic This text will be boldThis will also be bold You can combine them NewlinesEnd a line with two or more spaces + enter.Just typing enter to newline,please set：Preferences - Themes - Translate newlines to &lt;br&gt; tags enable ( default is enable ) ListsUnorderedExample: 1234* Item 1 unordered list `* + SPACE`* Item 2* Item 2a unordered list `TAB + * + SPACE`* Item 2b Shortcuts: Option + UResult: Item 1 unordered list * + SPACE Item 2 Item 2a unordered list TAB + * + SPACE Item 2b OrderedExample: 123451. Item 1 ordered list `Number + . + SPACE`2. Item 2 3. Item 31. Item 3a ordered list `TAB + Number + . + SPACE`2. Item 3b Result: Item 1 ordered list Number + . + SPACE Item 2 Item 3 Item 3a ordered list TAB + Number + . + SPACE Item 3b Task listsExample: 12- [ ] task one not finish `- + SPACE + [ ]`- [x] task two finished `- + SPACE + [x]` Result: task one not finish - + SPACE + [ ] task two finished - + SPACE + [x] ImagesExample: 12![GitHub set up](https://help.github.com/assets/images/site/set-up-git.gif)Format: ![Alt Text](url) Shortcuts: Control + Shift + IThe Library’s document support drag &amp; drop or CMD + V paste or CMD + Option + I to insert the picture.Result: In MWeb, you can use -w + Number to control image width, for example, set the image width 140px: LinksExample: 123email &lt;example@example.com&gt;[GitHub](http://github.com)autolink &lt;http://www.github.com/&gt; Shortcuts: Control + Shift + LThe Library’s document support drag &amp; drop or CMD + Option + I to insert attachment.Result: An email &#x65;&#120;&#97;&#109;&#112;&#x6c;&#x65;&#x40;&#101;&#x78;&#97;&#109;&#112;&#108;&#101;&#46;&#x63;&#111;&#109; link.GitHubAutomatic linking for URLsAny URL (like http://www.github.com/) will be automatically converted into a clickable link. BlockquotesExample: 123As Kanye West said:&gt; We&apos;re living the future so&gt; the present is our past. Shortcuts: CMD + Shift + BResult: As Kanye West said: We’re living the future sothe present is our past. Inline codeExample: 12I think you should use an`&lt;addr&gt;` `code` element here instead. Shortcuts: CMD + KResult: I think you should use an&lt;addr&gt; code element here instead. Multi-line codeExample: 123456function fancyAlert(arg) &#123; if(arg) &#123; $.facebox(&#123;div:'#foo'&#125;) &#125;&#125; Shortcuts: CMD + Shift + KResult: 123456function fancyAlert(arg) &#123; if(arg) &#123; $.facebox(&#123;div:'#foo'&#125;) &#125;&#125; Sequence and Flow chartExample: 1234Andrew-&gt;China: Says HelloNote right of China: China thinks about itChina--&gt;Andrew: How are you?Andrew-&gt;&gt;China: I am good thanks! 1234567891011st=&gt;start: Start:&gt;http://www.google.com[blank]e=&gt;end:&gt;http://www.google.comop1=&gt;operation: My Operationsub1=&gt;subroutine: My Subroutinecond=&gt;condition: Yesor No?:&gt;http://www.google.comio=&gt;inputoutput: catch something...st-&gt;op1-&gt;condcond(yes)-&gt;io-&gt;econd(no)-&gt;sub1(right)-&gt;op1 Result: ( Please enable Preferences - Themes - Enable sequence &amp; flow chart, default is enable. ) 1234Andrew-&gt;China: Says HelloNote right of China: China thinks about itChina--&gt;Andrew: How are you?Andrew-&gt;&gt;China: I am good thanks! 1234567891011st=&gt;start: Start:&gt;http://www.google.com[blank]e=&gt;end:&gt;http://www.google.comop1=&gt;operation: My Operationsub1=&gt;subroutine: My Subroutinecond=&gt;condition: Yesor No?:&gt;http://www.google.comio=&gt;inputoutput: catch something...st-&gt;op1-&gt;condcond(yes)-&gt;io-&gt;econd(no)-&gt;sub1(right)-&gt;op1 More info: http://bramp.github.io/js-sequence-diagrams/, http://adrai.github.io/flowchart.js/ TablesExample: 1234First Header | Second Header------------ | -------------Content from cell 1 | Content from cell 2Content in the first column | Content in the second column You can create tables by assembling a list of words and dividing them with hyphens - (for the first row), and then separating each column with a pipe |: Result: First Header Second Header Content from cell 1 Content from cell 2 Content in the first column Content in the second column StrikethroughExample: (like this) Result: Any word wrapped with two tildes (like this) will appear crossed out. Horizontal RulesFollowing lines will produce a horizontal rule: 12345********- - - Result: LaTexUse double US dollars sign pair for Block level Math formula, and one US dollar sign pair for Inline Level. 12345For example this is a Block level $$x = &#123;-b \pm \sqrt&#123;b^2-4ac&#125; \over 2a&#125;$$ formula, and this is an inline Level $x = &#123;-b \pm \sqrt&#123;b^2-4ac&#125; \over 2a&#125;$ formula.\\[ \frac&#123;1&#125;&#123;\Bigl(\sqrt&#123;\phi \sqrt&#123;5&#125;&#125;-\phi\Bigr) e^&#123;\frac25 \pi&#125;&#125; =1+\frac&#123;e^&#123;-2\pi&#125;&#125; &#123;1+\frac&#123;e^&#123;-4\pi&#125;&#125; &#123;1+\frac&#123;e^&#123;-6\pi&#125;&#125;&#123;1+\frac&#123;e^&#123;-8\pi&#125;&#125; &#123;1+\ldots&#125; &#125; &#125; &#125; \\] Result: For example this is a Block level $$x = {-b \pm \sqrt{b^2-4ac} \over 2a}$$ formula, and this is an inline Level $x = {-b \pm \sqrt{b^2-4ac} \over 2a}$ formula. \[ \frac{1}{\Bigl(\sqrt{\phi \sqrt{5}}-\phi\Bigr) e^{\frac25 \pi}} =1+\frac{e^{-2\pi}} {1+\frac{e^{-4\pi}} {1+\frac{e^{-6\pi}}{1+\frac{e^{-8\pi}} {1+\ldots} } } } \] FootnoteExample: 1This is a footnote:[^sample_footnote] Result: This is a footnote:[^sample_footnote] [^sample_footnote]: footnote text detail… Comment And Read More.. Actions-&gt;Insert Read More Comment OR CMD + . TOCExample: 1[TOC] Result: [TOC]]]></content>
      <categories>
        <category>工具</category>
      </categories>
      <tags>
        <tag>Markdown</tag>
      </tags>
  </entry>
</search>
